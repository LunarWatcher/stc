# stc

Header-only utilities for C++20\* and up. Name inspired by [stb](https://github.com/nothings/stb) (in part so I can have `stb`, `stc`, and `std` in some of my projects :) )

<sub>\*: Subject to change in the future</sub>

stc has documentation generated by doxygen. An online version is available [on GitHub pages](https://lunarwatcher.github.io/stc/)

## Modules

### Standalone modules

| Library | Category | Description | Warnings |
| --- | --- | --- | --- |
| `stc/Environment.hpp` | OS compatibility | Filesystem and other environmental utils for OS-specific operations | Uses `Windows.h` on Windows[^1] |
| `stc/StringUtil.hpp` | Utility library | Adds a few string operations that C++ does not (but should) have built into strings |  |
| `stc/StdFix.hpp` | stdlib fixes | Adds functions to deal with C++ being dumb | |
| `stc/FileLock.hpp` | OS compatibility | Adds functions to deal with file locks. Uses flock on Linux, and exclusive file access on Windows. | Uses `Windows.h` on Windows[^1] |
| `stc/IO.hpp` | OS compatibility | Deals with cross-platform IO | Uses `Windows.h` on Windows[^1] |

### Non-standalone modules

Some of the modules in this library depend on other modules. These are explicitly labelled to make it easier to identify what dependencies are necessary for minimal builds.

| Library | Category | Description | Dependencies |
| --- | --- | --- | --- |
| `stc/Colour.hpp` | Utility library | ANSI colour utility library for C++ streams | `Environment.hpp` |


## Usage

> [!warning]
> Upcoming versions of stc will not be header-only. Some of these are very low-level dependencies that include `<Windows.h>`, which can fuck over builds. Separating implementations into source files is the easiest way to avoid this.

All you have to do is set up `src/` as an include directory. Everything is header-only, and at the time of writing, requires no other setup.

CMake users can instead `add_subdirectory()` and take advantage of the `stc` interface target:
```
target_link_libraries(your-program stc)
```

FetchContent also works:

```
include(FetchContent)
FetchContent_Declare(stc
    GIT_REPOSITORY https://github.com/LunarWatcher/stc
    # Optional: pin stc version
    # GIT_TAG <hash>
)
FetchContent_MakeAvailable(stc)

# Same system as subdirectory
target_link_libraries(your-program stc)
```

## C++ compatibility

The current version of C++ targeted is C++20. This is not a new change at the time of this commit, as a dumb mistake resulted in a C++20 function being part of the library and not being caught, because testing hard.

[^1]: `Windows.h` is known to cause lots of problems on import, because it's stuffed full of macros and other shit that conflicts with a _lot_ of code. `#define NOMINMAX` is used to deal with one of the problems, but it can still fuck your code with weird error messages. If you get weird error messages after importing headers with `Windows.h` that inexplicably only appear on Windows, `Windows.h` is why
